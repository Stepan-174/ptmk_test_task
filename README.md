# ptmk_test_task
Приложение для парсинга данных из текстового документа (данные представлены в JSON) и занесения их в базу данных в MySQL Workbench

Задание:

Общие требования: - Написать приложение, которое будет запускаться из консоли с параметрами. Первый параметр, передаваемый при запуке, выбирает режим работы приложения соответствующий пункту задания. По ходу задания будут примеры запуска приложения. - Для ФИО использовать английский язык. Решать проблему с отображением русского языка в консоли, если возникает, не нужно. - Приложение должно подключаться к базе данных. - В качестве СУБД можно использовать любую SQL СУБД или MongoDB. - В разработке приложения обязательно применять объектно-ориентированный подход. - В качестве среды разработки можете использовать любой известный вам объектно-ориентированный язык программирования.

Режимы работы приложения: 
1. Создание таблицы с полями справочника сотрудников, представляющими "Фамилию Имя Отчество", "дату рождения", "пол".

Пример запуска приложения: myApp 1 К примеру для java: java myApp.class 1 или java myApp.jar 1

2. Создание записи справочника сотрудников. Для работы с данными создать класс и создавать объекты. При вводе создавать новый объект класса, с введенными пользователем данными. При генерации строчек в базу создавать объект и его отправлять в базу/формировать строчку для отправки нескольких строк в БД. У объекта должны быть методы, которые: - отправляют объект в БД, - рассчитывают возраст (полных лет).

Пример запуска во 2 режиме: myApp 2 "Ivanov Petr Sergeevich" 2009-07-12 Male

3. Вывод всех строк справочника сотрудников, с уникальным значением ФИО+дата, отсортированным по ФИО. Вывести ФИО, Дату рождения, пол, кол-во полных лет. Пример запуска приложения: myApp 3

4. Заполнение автоматически 1000000 строк справочника сотрудников. Распределение пола в них должно быть относительно равномерным, начальной буквы ФИО также. Добавить заполнение автоматически 100 строк в которых пол мужской и Фамилия начинается с "F". У класса необходимо создать метод, который пакетно отправляет данные в БД, принимая массив объектов. Пример запуска приложения: myApp 4

5. Результат выборки из таблицы по критерию: пол мужской, Фамилия начинается с "F". Сделать замер времени выполнения. Пример запуска приложения: myApp 5 Вывод приложения должен содержать время. Заполнить это время в отчете по выполнению тестового задания.

Реализация приложения myApp.

Основной язык: Python

База данных: в MySQL Workbench

Ниже представлен пример реализации приложения на Python с использованием объектно-ориентированного подхода и подключением к базе данных MySQL. В этом примере реализованы 5 режимов работы, описанных в задании.

Перед запуском убедитесь, что у вас установлен драйвер для MySQL (например, mysql-connector-python) и создана база данных с нужной таблицей.

Установите драйвер:

В консоли:
pip install mysql-connector-python

Создайте базу данных:

В MySQL:
CREATE DATABASE employees_db;

Можно создать заранее и таблицу, но это реализовано в режиме 1 приложения myApp:
CREATE TABLE employees (
    id INT AUTO_INCREMENT PRIMARY KEY,
    full_name VARCHAR(255),
    birth_date DATE,
    gender VARCHAR(10)
);

Важно. Данные сотрудников  для базы данных MySQL из файла catalog.txt, где они представлены в формате JSON.


В коде были использованы следующие модули:
sys 
Модуль sys предоставляет доступ к некоторым переменным и функциям, связанным с интерпретатором Python. Например, он позволяет работать с аргументами командной строки (sys.argv), управлять выходом из программы (sys.exit()), получать информацию о версии Python и т.д.

json
Модуль json используется для работы с JSON-данными (JavaScript Object Notation). Он позволяет преобразовывать Python-объекты в строку JSON (json.dumps()) и обратно — из JSON-строки в Python-объекты (json.loads()). Это удобно для обмена данными между системами или хранения данных в формате JSON.

random
Модуль random предназначен для генерации случайных чисел и выбора случайных элементов. Он включает функции для генерации случайных чисел (random.randint(), random.uniform()), перемешивания списков (random.shuffle()) и выбора случайного элемента из последовательности (random.choice()).


mysql.connector 
Этот импорт позволяет подключаться к базе данных MySQL с помощью библиотеки mysql.connector. Функция connect() устанавливает соединение с базой данных, что позволяет выполнять SQL-запросы, получать и изменять данные.

datetime, date
Модуль datetime содержит классы для работы с датой и временем.
datetime — представляет дату и время.
date — представляет только дату.
Эти классы позволяют получать текущие даты/время, форматировать их, выполнять арифметические операции и т.д.
 
argparse
Модуль argparse используется для парсинга аргументов командной строки. 

time
Модуль time предоставляет функции для работы со временем:
Получение текущего времени.
Задержки выполнения.
Форматирование времени.
Работа с временными метками.

Режимы работы приложения: 

1. Создание таблицы с полями справочника сотрудников, представляющими "Фамилию Имя Отчество", "дату рождения", "пол".

Запуск режима из консоли:
python myApp.py 1

Результат:

В MySQL создана таблица employee в базе данных employees_db.

 
2. Создание записи справочника сотрудников.
Запуск режима из консоли: 
python myApp.py 2 --full_name "Ivanov Petr Sergeevich" --birth_date 2009-07-12 --gender Male




Результат:
Добавлена запись в таблицу employee

 

3. Вывод всех строк справочника сотрудников, с уникальным значением ФИО+дата, отсортированным по ФИО. 

Запуск режима из консоли: 
python myApp.py 3

Результат:
Выведены добавленные записи в таблицу employee.

 

4. Заполнение автоматически  строк справочника сотрудников. Есть функция фильтрации по количеству необходимых к заполнению строк. Например, 50, 100. 
Так же есть функция фильтрации по полу и начальной букве фамилии (в примере пол мужской и Фамилия начинается с "F"). 
Модуль пакетно отправляет данные в БД, принимая массив объектов из файла catalog.txt, где данные представлены в формате JSON. 

Запуск режима из консоли: 
python myApp.py 4 --filter_gender=Male --filter_name_start=F --limit=5

 

5. Результат выборки из таблицы по критерию: пол мужской, Фамилия начинается с "F". Сделан замер времени выполнения. 

Запуск режима из консоли: 
python myApp.py 5 --filter_gender=Male --filter_name_start=F

Вывод приложения содержит время: 0.12 секунд на обработку базы данных из 16 сотрудников.
